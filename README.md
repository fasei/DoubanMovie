# DoubanMovie 
本项目为爬虫项目，主要是爬取的豆瓣上电影的短影评，将数据爬取完成后，
将影评数据存入数据库，同时生成影评的词云图

## 项目说明：
使用的python的scrapy框架，数据库为mysql

## 包含的主要功能
1. 自动登录豆瓣用户，内置用户名和密码，如使用可修改为个人用户，多次爬取会出现验证码，项目会自动打开验证码图片，需要用户输入正确的验证码
2. 自动生成数据库中表，同时插入的数据会自动去重
3. 爬取完成后，自动打开生成的词云，请耐心等待

## 过程特别说明：
1. 如果不登录，只能爬取10页数据,已增加检测机制，不登录不能爬取数据
2. 登录后爬取到最后一共400+留言
3. 其中使用了更换useragent的方式
4. 记录到数据库中，会自动去重
5. 遇到新问题，登录有验证码，需要处理,以解决，使用的本地打开验证码，用户输入正确验证码的方式
6. 如果验证码错误，增加了检测机制，重新输入验证码


## 遇到的问题说明：
1. 如果使用用户名和密码登录，如果一直不成功，应该尝试在浏览器登录，避免因为帐号被锁定而测试不成功

## 详细的使用说明：
* 如果需要爬取其他影评，需要修改settings.DOUBAN_ID(此为网址中电影ID)和settings.TABLE_NAME字段（此为数据库的表名）

### 运行代码:
运行如下代码即可：
```
scrapy crawl DoubanDancer
```
